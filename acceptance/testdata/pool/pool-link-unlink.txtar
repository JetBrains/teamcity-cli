# Link and unlink a project from an agent pool.
[!has_token] skip 'requires authentication token'

# Use default pool (0) and discover a project
exec teamcity api /app/rest/projects?locator=count:1&fields=project(id) --raw --no-input
extract '"id":"([^"]+)"' PROJECT_ID

# Link project to pool 0
exec teamcity pool link 0 $PROJECT_ID --no-input
stdout 'Linked'
! stderr 'Error'

# Unlink project from pool 0
exec teamcity pool unlink 0 $PROJECT_ID --no-input
stdout 'Unlinked'
! stderr 'Error'

# Test run view subcommand.

exec teamcity api /app/rest/builds?locator=count:1&fields=build(id) --raw --no-input
extract '"id":(\d+)' BUILD_ID

exec teamcity run view $BUILD_ID --no-input
stdout 'Triggered by'
stdout 'View in browser:'
! stderr 'Error'

# --json
exec teamcity run view $BUILD_ID --json --no-input
stdout '"id"'
stdout '"status"'
stdout '"state"'
! stderr 'Error'

# nonexistent
! exec teamcity run view 999999999 --no-input
stderr '.'

<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2026-02-24T13:16:39.125908"><title>Scripting and Automation | TeamCity CLI</title><script type="application/json" id="virtual-toc-data">[{"id":"json-output","level":0,"title":"JSON output","anchor":"#json-output"},{"id":"basic-usage","level":1,"title":"Basic usage","anchor":"#basic-usage"},{"id":"discovering-available-fields","level":1,"title":"Discovering available fields","anchor":"#discovering-available-fields"},{"id":"selecting-specific-fields","level":1,"title":"Selecting specific fields","anchor":"#selecting-specific-fields"},{"id":"nested-fields","level":1,"title":"Nested fields","anchor":"#nested-fields"},{"id":"json-for-view-and-inspection-commands","level":1,"title":"JSON for view and inspection commands","anchor":"#json-for-view-and-inspection-commands"},{"id":"available-fields-by-command","level":1,"title":"Available fields by command","anchor":"#available-fields-by-command"},{"id":"plain-text-output","level":0,"title":"Plain text output","anchor":"#plain-text-output"},{"id":"scripting-examples","level":0,"title":"Scripting examples","anchor":"#scripting-examples"},{"id":"get-ids-of-failed-builds","level":1,"title":"Get IDs of failed builds","anchor":"#get-ids-of-failed-builds"},{"id":"export-build-data-to-csv","level":1,"title":"Export build data to CSV","anchor":"#export-build-data-to-csv"},{"id":"get-web-urls-for-queued-builds","level":1,"title":"Get web URLs for queued builds","anchor":"#get-web-urls-for-queued-builds"},{"id":"count-builds-by-status","level":1,"title":"Count builds by status","anchor":"#count-builds-by-status"},{"id":"wait-for-a-build-to-finish","level":1,"title":"Wait for a build to finish","anchor":"#wait-for-a-build-to-finish"},{"id":"cancel-all-queued-builds-for-a-job","level":1,"title":"Cancel all queued builds for a job","anchor":"#cancel-all-queued-builds-for-a-job"},{"id":"ci-cd-integration","level":0,"title":"CI/CD integration","anchor":"#ci-cd-integration"},{"id":"environment-variable-authentication","level":1,"title":"Environment variable authentication","anchor":"#environment-variable-authentication"},{"id":"non-interactive-mode","level":1,"title":"Non-interactive mode","anchor":"#non-interactive-mode"},{"id":"read-only-mode","level":1,"title":"Read-only mode","anchor":"#read-only-mode"},{"id":"quiet-mode","level":1,"title":"Quiet mode","anchor":"#quiet-mode"},{"id":"exit-codes","level":1,"title":"Exit codes","anchor":"#exit-codes"},{"id":"raw-api-access","level":0,"title":"Raw API access","anchor":"#raw-api-access"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.26.0-b913/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content="https://resources.jetbrains.com/storage/products/teamcity/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Scripting and Automation | TeamCity CLI"><meta property="og:description" content=""><meta property="og:image" content="https://resources.jetbrains.com/storage/products/teamcity/img/meta/preview.png"><meta property="og:site_name" content="TeamCity CLI Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/teamcity-cli-scripting.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Scripting and Automation | TeamCity CLI"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/teamcity/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/teamcity-cli-scripting.html#webpage",
    "url": "writerside-documentation/teamcity-cli-scripting.html",
    "name": "Scripting and Automation | TeamCity CLI",
    "description": "",
    "image": "https://resources.jetbrains.com/storage/products/teamcity/img/meta/preview.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "TeamCity CLI Help"
}</script><!-- End Schema.org --></head><body data-id="teamcity-cli-scripting" data-main-title="Scripting and Automation" data-article-props="{&quot;seeAlso&quot;:[{&quot;title&quot;:&quot;Reference&quot;,&quot;links&quot;:[{&quot;url&quot;:&quot;teamcity-cli-commands.html&quot;,&quot;text&quot;:&quot;Command reference&quot;,&quot;tooltip&quot;:&quot;This page provides a quick reference for all available TeamCity CLI commands. Each command group links to a detailed page with full descriptions, flags, and examples.&quot;,&quot;description&quot;:&quot;This page provides a quick reference for all available TeamCity CLI commands. Each command group links to a detailed page with full descriptions, flags, and examples.&quot;},{&quot;url&quot;:&quot;teamcity-cli-rest-api-access.html&quot;,&quot;text&quot;:&quot;REST API access&quot;,&quot;tooltip&quot;:&quot;The teamcity api command lets you make authenticated HTTP requests to the TeamCity REST API directly from the command line. This is useful for accessing API endpoints not yet covered by dedicated CLI commands, building custom scripts, and debugging.&quot;,&quot;description&quot;:&quot;The teamcity api command lets you make authenticated HTTP requests to the TeamCity REST API directly from the command line. This is useful for accessing API endpoints not yet covered by dedicated CLI commands, building custom scripts, and debugging.&quot;}]},{&quot;title&quot;:&quot;User guide&quot;,&quot;links&quot;:[{&quot;url&quot;:&quot;teamcity-cli-aliases.html&quot;,&quot;text&quot;:&quot;Aliases&quot;,&quot;tooltip&quot;:&quot;Aliases let you create custom shortcuts for frequently used teamcity commands. They are stored in the configuration file and expand automatically when you run them.&quot;,&quot;description&quot;:&quot;Aliases let you create custom shortcuts for frequently used teamcity commands. They are stored in the configuration file and expand automatically when you run them.&quot;},{&quot;url&quot;:&quot;teamcity-cli-authentication.html&quot;,&quot;text&quot;:&quot;Authentication&quot;,&quot;tooltip&quot;:&quot;TeamCity CLI supports several authentication methods. This page covers interactive login, guest access, token-based authentication for CI/CD, multi-server setup, and automatic authentication within TeamCity builds.&quot;,&quot;description&quot;:&quot;TeamCity CLI supports several authentication methods. This page covers interactive login, guest access, token-based authentication for CI/CD, multi-server setup, and automatic authentication within TeamCity builds.&quot;}]}],&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="teamcity-cli.md|TeamCity CLI///Advanced" data-edit-url="https://github.com/JetBrains/teamcity-cli/edit/main/docs/topics/teamcity-cli-scripting.md"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>TeamCity CLI  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="teamcity-cli-scripting" id="teamcity-cli-scripting.md">Scripting and Automation</h1><p id="x4w4bx_3">TeamCity CLI provides several output formats and features designed for scripting, automation, and CI/CD integration.</p><section class="chapter"><h2 id="json-output" data-toc="json-output">JSON output</h2><p id="x4w4bx_10">Many commands support a <code class="code" id="x4w4bx_17">--json</code> flag for machine-readable output. List commands also accept optional field selection.</p><section class="chapter"><h3 id="basic-usage" data-toc="basic-usage">Basic usage</h3><div class="code-block" data-lang="bash">
teamcity run list --json
teamcity job list --json
teamcity project list --json
</div></section><section class="chapter"><h3 id="discovering-available-fields" data-toc="discovering-available-fields">Discovering available fields</h3><p id="x4w4bx_19">Pass <code class="code" id="x4w4bx_22">--json=</code> (with an empty value) to see all available fields for a command:</p><div class="code-block" data-lang="bash">
teamcity run list --json=
</div><figure data-theme="light" id="x4w4bx_21" width="1200"><img alt="JSON output with field selection" class="js-gif article__bordered-element--rounded" data-gif-src="images/json-output.gif" width="1200" data-dark-gif-src="images/json-output_dark.gif" style="width: 1200px;"></figure></section><section class="chapter"><h3 id="selecting-specific-fields" data-toc="selecting-specific-fields">Selecting specific fields</h3><p id="x4w4bx_23">Specify a comma-separated list of fields:</p><div class="code-block" data-lang="bash">
teamcity run list --json=id,status,webUrl
</div><p id="x4w4bx_25">Field selection (<code class="code" id="x4w4bx_26">--json=...</code>) is available on list commands only. View and inspection commands accept <code class="code" id="x4w4bx_27">--json</code> without field selection.</p></section><section class="chapter"><h3 id="nested-fields" data-toc="nested-fields">Nested fields</h3><p id="x4w4bx_28">Use dot notation to access nested fields:</p><div class="code-block" data-lang="bash">
teamcity run list --json=id,status,buildType.name,triggered.user.username
</div></section><section class="chapter"><h3 id="json-for-view-and-inspection-commands" data-toc="json-for-view-and-inspection-commands">JSON for view and inspection commands</h3><div class="code-block" data-lang="bash">
teamcity run view 12345 --json
teamcity run changes 12345 --json
teamcity run tests 12345 --json
teamcity run artifacts 12345 --json
teamcity agent view Agent-Linux-01 --json
teamcity project settings status MyProject --json
</div></section><section class="chapter"><h3 id="available-fields-by-command" data-toc="available-fields-by-command">Available fields by command</h3><div class="table-wrapper"><table class="wide" id="x4w4bx_31"><thead><tr class="ijRowHead" id="x4w4bx_32"><th id="x4w4bx_39"><p id="x4w4bx_41">Command</p></th><th id="x4w4bx_40"><p id="x4w4bx_42">Example fields</p></th></tr></thead><tbody><tr id="x4w4bx_33"><td id="x4w4bx_43"><p id="x4w4bx_45"><code class="code" id="x4w4bx_46">teamcity run list</code></p></td><td id="x4w4bx_44"><p id="x4w4bx_47"><code class="code" id="x4w4bx_48">id</code>, <code class="code" id="x4w4bx_49">number</code>, <code class="code" id="x4w4bx_50">status</code>, <code class="code" id="x4w4bx_51">state</code>, <code class="code" id="x4w4bx_52">branchName</code>, <code class="code" id="x4w4bx_53">buildTypeId</code>, <code class="code" id="x4w4bx_54">buildType.name</code>, <code class="code" id="x4w4bx_55">buildType.projectName</code>, <code class="code" id="x4w4bx_56">triggered.type</code>, <code class="code" id="x4w4bx_57">triggered.user.name</code>, <code class="code" id="x4w4bx_58">agent.name</code>, <code class="code" id="x4w4bx_59">startDate</code>, <code class="code" id="x4w4bx_60">finishDate</code>, <code class="code" id="x4w4bx_61">webUrl</code></p></td></tr><tr id="x4w4bx_34"><td id="x4w4bx_62"><p id="x4w4bx_64"><code class="code" id="x4w4bx_65">teamcity job list</code></p></td><td id="x4w4bx_63"><p id="x4w4bx_66"><code class="code" id="x4w4bx_67">id</code>, <code class="code" id="x4w4bx_68">name</code>, <code class="code" id="x4w4bx_69">projectName</code>, <code class="code" id="x4w4bx_70">projectId</code>, <code class="code" id="x4w4bx_71">paused</code>, <code class="code" id="x4w4bx_72">href</code>, <code class="code" id="x4w4bx_73">webUrl</code></p></td></tr><tr id="x4w4bx_35"><td id="x4w4bx_74"><p id="x4w4bx_76"><code class="code" id="x4w4bx_77">teamcity project list</code></p></td><td id="x4w4bx_75"><p id="x4w4bx_78"><code class="code" id="x4w4bx_79">id</code>, <code class="code" id="x4w4bx_80">name</code>, <code class="code" id="x4w4bx_81">description</code>, <code class="code" id="x4w4bx_82">parentProjectId</code>, <code class="code" id="x4w4bx_83">href</code>, <code class="code" id="x4w4bx_84">webUrl</code></p></td></tr><tr id="x4w4bx_36"><td id="x4w4bx_85"><p id="x4w4bx_87"><code class="code" id="x4w4bx_88">teamcity queue list</code></p></td><td id="x4w4bx_86"><p id="x4w4bx_89"><code class="code" id="x4w4bx_90">id</code>, <code class="code" id="x4w4bx_91">buildTypeId</code>, <code class="code" id="x4w4bx_92">state</code>, <code class="code" id="x4w4bx_93">branchName</code>, <code class="code" id="x4w4bx_94">queuedDate</code>, <code class="code" id="x4w4bx_95">buildType.name</code>, <code class="code" id="x4w4bx_96">triggered.user.name</code>, <code class="code" id="x4w4bx_97">webUrl</code></p></td></tr><tr id="x4w4bx_37"><td id="x4w4bx_98"><p id="x4w4bx_100"><code class="code" id="x4w4bx_101">teamcity agent list</code></p></td><td id="x4w4bx_99"><p id="x4w4bx_102"><code class="code" id="x4w4bx_103">id</code>, <code class="code" id="x4w4bx_104">name</code>, <code class="code" id="x4w4bx_105">connected</code>, <code class="code" id="x4w4bx_106">enabled</code>, <code class="code" id="x4w4bx_107">authorized</code>, <code class="code" id="x4w4bx_108">pool.name</code>, <code class="code" id="x4w4bx_109">webUrl</code></p></td></tr><tr id="x4w4bx_38"><td id="x4w4bx_110"><p id="x4w4bx_112"><code class="code" id="x4w4bx_113">teamcity pool list</code></p></td><td id="x4w4bx_111"><p id="x4w4bx_114"><code class="code" id="x4w4bx_115">id</code>, <code class="code" id="x4w4bx_116">name</code>, <code class="code" id="x4w4bx_117">maxAgents</code></p></td></tr></tbody></table></div></section></section><section class="chapter"><h2 id="plain-text-output" data-toc="plain-text-output">Plain text output</h2><p id="x4w4bx_118">Use <code class="code" id="x4w4bx_122">--plain</code> for tab-separated output that is easy to parse with standard Unix tools:</p><div class="code-block" data-lang="bash">
teamcity run list --plain
</div><p id="x4w4bx_120">Omit the header row for cleaner piping:</p><div class="code-block" data-lang="bash">
teamcity run list --plain --no-header
</div></section><section class="chapter"><h2 id="scripting-examples" data-toc="scripting-examples">Scripting examples</h2><section class="chapter"><h3 id="get-ids-of-failed-builds" data-toc="get-ids-of-failed-builds">Get IDs of failed builds</h3><div class="code-block" data-lang="bash">
teamcity run list --status failure --json=id | jq -r '.[].id'
</div></section><section class="chapter"><h3 id="export-build-data-to-csv" data-toc="export-build-data-to-csv">Export build data to CSV</h3><div class="code-block" data-lang="bash">
teamcity run list --json=id,status,branchName | jq -r '.[] | [.id,.status,.branchName] | @csv'
</div></section><section class="chapter"><h3 id="get-web-urls-for-queued-builds" data-toc="get-web-urls-for-queued-builds">Get web URLs for queued builds</h3><div class="code-block" data-lang="bash">
teamcity queue list --json=webUrl | jq -r '.[].webUrl'
</div></section><section class="chapter"><h3 id="count-builds-by-status" data-toc="count-builds-by-status">Count builds by status</h3><div class="code-block" data-lang="bash">
teamcity run list --since 24h --json=status | jq 'group_by(.status) | map({status: .[0].status, count: length})'
</div></section><section class="chapter"><h3 id="wait-for-a-build-to-finish" data-toc="wait-for-a-build-to-finish">Wait for a build to finish</h3><div class="code-block" data-lang="bash">
teamcity run start MyProject_Build --json | jq -r '.id' | xargs teamcity run watch --quiet
</div></section><section class="chapter"><h3 id="cancel-all-queued-builds-for-a-job" data-toc="cancel-all-queued-builds-for-a-job">Cancel all queued builds for a job</h3><div class="code-block" data-lang="bash">
teamcity queue list --job MyProject_Build --json=id | jq -r '.[].id' | xargs -I {} teamcity run cancel {} --force
</div></section></section><section class="chapter"><h2 id="ci-cd-integration" data-toc="ci-cd-integration">CI/CD integration</h2><section class="chapter"><h3 id="environment-variable-authentication" data-toc="environment-variable-authentication">Environment variable authentication</h3><p id="x4w4bx_140">In CI/CD pipelines, use environment variables for authentication:</p><div class="tabs" id="x4w4bx_141" data-anchors="[x4w4bx_143,x4w4bx_144]"><div class="tabs__content" data-gtm="tab" id="x4w4bx_143" data-title="macOS and Linux"><div class="code-block" data-lang="bash" data-title="Shell">
export TEAMCITY_URL=&quot;https://teamcity.example.com&quot;
export TEAMCITY_TOKEN=&quot;your-access-token&quot;
</div></div><div class="tabs__content" data-gtm="tab" id="x4w4bx_144" data-title="Windows"><p id="x4w4bx_146">PowerShell:</p><div class="code-block" data-lang="powershell" data-title="PowerShell">
$env:TEAMCITY_URL = &quot;https://teamcity.example.com&quot;
$env:TEAMCITY_TOKEN = &quot;your-access-token&quot;
</div><p id="x4w4bx_148">CMD:</p><div class="code-block" data-lang="bash" data-title="Shell">
set TEAMCITY_URL=https://teamcity.example.com
set TEAMCITY_TOKEN=your-access-token
</div></div></div><p id="x4w4bx_142">See <a href="teamcity-cli-authentication.html#environment-variables" id="x4w4bx_150" data-tooltip="For CI/CD pipelines and scripted environments, use environment variables instead of interactive login:">Authentication</a> for details.</p></section><section class="chapter"><h3 id="non-interactive-mode" data-toc="non-interactive-mode">Non-interactive mode</h3><p id="x4w4bx_151">Use <code class="code" id="x4w4bx_155">--no-input</code> to disable interactive prompts in automated environments. The CLI uses sensible defaults when prompts are suppressed:</p><div class="code-block" data-lang="bash">
teamcity run cancel 12345 --no-input
</div><p id="x4w4bx_153">Alternatively, use <code class="code" id="x4w4bx_156">--force</code> on commands that support it:</p><div class="code-block" data-lang="bash">
teamcity queue remove 12345 --force
</div></section><section class="chapter"><h3 id="read-only-mode" data-toc="read-only-mode">Read-only mode</h3><p id="x4w4bx_157">Set <code class="code" id="x4w4bx_161">TEAMCITY_RO=1</code> to prevent any write operations. In this mode, commands that would modify data (triggering builds, canceling, pinning, changing parameters, and so on) are rejected before a request is sent:</p><div class="code-block" data-lang="bash">
export TEAMCITY_RO=1
teamcity run list              # works — read-only
teamcity run start MyBuild     # blocked — would trigger a build
</div><p id="x4w4bx_159">This is useful for monitoring dashboards, reporting scripts, and shared environments where accidental modifications must be prevented. The flag also blocks write operations through <code class="code" id="x4w4bx_162">teamcity api</code> with non-GET methods.</p><p id="x4w4bx_160">See <a href="teamcity-cli-configuration.html#environment-variables" id="x4w4bx_163" data-tooltip="Environment variables override configuration file settings and are the recommended way to configure the CLI in CI/CD pipelines.">Configuration</a> for accepted values.</p></section><section class="chapter"><h3 id="quiet-mode" data-toc="quiet-mode">Quiet mode</h3><p id="x4w4bx_164">Use <code class="code" id="x4w4bx_166">--quiet</code> to suppress non-essential output:</p><div class="code-block" data-lang="bash">
teamcity run start MyProject_Build --quiet
</div></section><section class="chapter"><h3 id="exit-codes" data-toc="exit-codes">Exit codes</h3><p id="x4w4bx_167">Most commands return exit code <code class="code" id="x4w4bx_170">0</code> on success and <code class="code" id="x4w4bx_171">1</code> on failure. The <code class="code" id="x4w4bx_172">teamcity run watch</code> flow (including <code class="code" id="x4w4bx_173">teamcity run start --watch</code>) returns:</p><ul class="list _bullet" id="x4w4bx_168"><li class="list__item" id="x4w4bx_174"><p id="x4w4bx_176"><code class="code" id="x4w4bx_177">2</code> when a run is canceled</p></li><li class="list__item" id="x4w4bx_175"><p id="x4w4bx_178"><code class="code" id="x4w4bx_179">124</code> on timeout</p></li></ul><div class="code-block" data-lang="bash">
teamcity run start MyProject_Build --watch --quiet
case $? in
  0) echo &quot;Build succeeded&quot; ;;
  1) echo &quot;Build failed&quot; ;;
  2) echo &quot;Build cancelled&quot; ;;
  124) echo &quot;Timed out&quot; ;;
  *) echo &quot;Unknown error&quot; ;;
esac
</div></section></section><section class="chapter"><h2 id="raw-api-access" data-toc="raw-api-access">Raw API access</h2><p id="x4w4bx_180">For operations not covered by dedicated commands, use <code class="code" id="x4w4bx_183">teamcity api</code> to make direct REST API requests:</p><div class="code-block" data-lang="bash">
teamcity api /app/rest/server
teamcity api /app/rest/builds --paginate --slurp
</div><p id="x4w4bx_182">See <a href="teamcity-cli-rest-api-access.html" id="x4w4bx_184" data-tooltip="The teamcity api command lets you make authenticated HTTP requests to the TeamCity REST API directly from the command line. This is useful for accessing API endpoints not yet covered by dedicated CLI commands, building custom scripts, and debugging.">REST API access</a> for details.</p></section><div class="last-modified">24 February 2026</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="teamcity-cli-aliases.html" class="navigation-links__prev">Aliases</a><a href="teamcity-cli-ai-agent-integration.html" class="navigation-links__next">AI Agent Integration</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.26.0-b913/app.js"></script></body></html>